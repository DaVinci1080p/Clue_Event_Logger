<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="styles/nis/nis.css"/>
	<link rel="stylesheet" type="text/css" href="styles/nis/alt1-currentskin/skinstyle.css"/><!--stylesheet with all nis styles (Will be part of public resources so feel free to copy/paste)-->
	<script type="text/javascript" src="scripts/alt1lib.js"></script><!--alt1 wrapper library (Will be part of public resources so feel free to copy/paste)-->
	<script type="text/javascript" src="scripts/imagedetect.js"></script><!--Basic alt1 image processing library-->
    <script src="https://www.unpkg.com/@alt1/base"></script>
	<script src="https://www.unpkg.com/@alt1/ocr"></script>
	<script src="https://www.unpkg.com/@alt1/chatbox"></script>
	<script src="https://runeapps.org/runeappslib.js"></script>
	<script
  		src="https://code.jquery.com/jquery-3.6.0.js"
  		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
  		crossorigin="anonymous"></script>
	<script type="text/javascript" src="scripts/iconcomparison.js"></script>
	<script type="text/javascript" src="images/ItemsAndImages.js"></script>
	
	
	<script type="text/javascript">
		capturecenter={x:300,y:300};
		xpcallback=false;
		xpcountercallback=false;
		currenttooltip="";
		
		//This object is used to set the config for this app
		var exampleconfig={
			appName:"Example app",
			description:"This app is an example for other developers, this text will show up in the app list.",
			appUrl:"/apps/alt1/example/",//app startup url relative to current domain
			configUrl:"/apps/alt1/example/appconfig.jon",//link to a json file which contains this object, this link uniquely identifies your app
			defaultWidth:300,//preferred sizes, can be overwritten by alt1
			defaultHeight:300,
			minWidth:200,
			minHeight:200,
			maxWidth:1000,
			maxHeight:1000,
			
			//used to signal alt1 that this app can handle certain requests like a player lookup when the user presses alt+1 over a player name.
			//{handlerName:"player",handlerUrl:"/myUrl/?player=%s",handlerScript:"setPlayer('%s');"}
			requestHandlers:[],
			
			//will open this app when you press alt1 while hovering over drop blue partyhat etc (up to 10 currently)
			activators: ["Drop Blue partyhat", "Drop Purple partyhat","regex:^Activate (?<abil>[\w ]+)$"],

			//a comma separate list of required permissions for this app to run
			permissions:"pixel,gamestate,overlay"
		};
		
		//reference the appconfig.json file as config, this file can also be referenced in an alt1 link in any browser
		//clicking this link in any browser will start alt1 and show an add app dialog
		//<a href="alt1:addapp:http://runeapps.org/apps/alt1/example/appconfig.json">Add example app</a>
		//only supported in alt1 1.1+
		if(window.alt1 && alt1.versionint>1001000){alt1.identifyAppUrl("appconfig.json");}
		
		//i'm crippled without this function
		function elid(id){return document.getElementById(id);}
		
		//this function will be called when the user presses alt1 over anything
		function alt1onrightclick(obj){
			message("Alt+1 ("+obj.x+":"+obj.y+") - \""+obj.text+"\"");
			capturecenter={x:obj.x,y:obj.y};
			docapture();
		}
		
		//captures the area around the last alt+1 press and displays it on a canvas
		function docapture(){
			/*
			var size,rawcapture,image,ctx,cnv,capturex,capturey,color,pixelindex,red,green,blue;
			cnv=elid("capturecnv");
			ctx=cnv.getContext("2d");
			
			//get the location for capture
			size=cnv.getBoundingClientRect();
			capturex=capturecenter.x-Math.round(size.width/2);
			capturey=capturecenter.y-Math.round(size.height/2);
			
			//do capture
			rawcapture=a1lib.getregion(capturex,capturey,size.width,size.height);
			//rawcapture is an imageBuffer object 
			//it has width, height and a Uint8Array called data, this array holds all pixel data in one dimension
			
			if(!rawcapture){//check if capture succeeded
				message("Image capture failed");
				return;}
			
			//calculate the index of the pixel underneath the mouse
			//multiply the x-coord by 4 as every pixel has 4 components (red,green,blue,alpha)
			pixelindex=(capturecenter.x-capturex)*4;
			//multiply the y-coord by 4*width
			pixelindex+=(capturecenter.y-capturey)*4*rawcapture.width;
			
			red=rawcapture.data[pixelindex+0]//index+0 is red
			green=rawcapture.data[pixelindex+1]//index+1 is green
			blue=rawcapture.data[pixelindex+2]//index+2 is blue
			//index+3 is alpha, we rarely need that
			
			//display the color in our output div
			elid("coloroutput").style.background="rgb("+red+","+green+","+blue+")";
			elid("coloroutput").innerHTML="rgb:<br>"+red+" - "+green+" - "+blue;
			
			//to actually draw the buffer we sadly need to convert it to an image as it's not a real imageBuffer object (otherwise we could use the ctx.putImageData function)
			//this function draw the buffer pixel by pixel and thus is quite slow on big images
			image=rawcapture.toImage();
			
			//reset the canvas and draw the image
			cnv.width=image.width;
			cnv.height=image.height;
			ctx.drawImage(image,0,0);
			*/
		}

		//My own functions for this project
        function refresh(){
            location.reload()
        }
		
		function solution(){
			//A few notes
			// - Skip over yellow and white text
			// - Is an autocompletion
			// - pixel comparison each time
			// - check within 2 absolute value I think

		}
	
	</script>
</head>
<body class="nis" onload="start();">
    <header>
		<h1 class="title">OpenLogger, an open-source clue logger</h1>
		<div class="header_box">
        	<div class="button_box">
        	    <div class="clue_scrolls_buttons" id="top">
					<h3 class="clue_scrolls_button_header">Select the tier you're opening</h3>
        	        <div class="clue_scrolls_button_box">
        	            <div class="clue_button_label_holder" id="clue_easy">
        	                <label for="easy" id="clue_scroll_level_label">Easy</label>
        	                <input type="radio" id="easy" name="clue_scroll_level" class="clue_scroll_level" value="easy" checked>
        	            </div>
        	            <div class="clue_button_label_holder" id="clue_medium">
        	                <label for="medium" id="clue_scroll_level_label">Medium</label>
        	                <input type="radio" id="medium" name="clue_scroll_level" class="clue_scroll_level" value="medium">
						</div>
        	            <div class="clue_button_label_holder" id="clue_hard">
        	                <label for="hard" id="clue_scroll_level_label">Hard</label>
        	                <input type="radio" id="hard" name="clue_scroll_level" class="clue_scroll_level" value="hard">
        	            </div>
        	            <div class="clue_button_label_holder" id="clue_elite">
        	                <label for="elite" id="clue_scroll_level_label">Elite</label>
        	                <input type="radio" id="elite" name="clue_scroll_level" class="clue_scroll_level" value="elite">
        	            </div>
        	            <div class="clue_button_label_holder" id="clue_master">
        	                <label for="master" id="clue_scroll_level_label">Master</label>
        	                <input type="radio" id="master" name="clue_scroll_level" class="clue_scroll_level" value="master">
        	            </div>
        	        </div>
        	    </div>
        	    <div class="main_buttons" id="top">
        	        <div id="csv_button" class="nisbutton" onclick="refresh();"><!--exporttocsv()--><strike>Export to CSV</strike></div>
        	        <div id="clear_button" class="nisbutton" onclick="cleardb();"><strike>Clear Database</strike></div>
					<div id="docapturebutton" class="nisbutton" onclick="firstFunction();"><!--docapture()-->Capture Rewards</div>
        	    </div>
				<div class="capture_info" id="top">
					<div class="capture_box_elements" id="math_box_count">
						<u><span id="clue_tier">Current</span> clues logged</u>
						<div><span id="number_of_clues">0</span></div>
					</div>
					<div class="capture_box_elements" id="math_box_total">
						<u>Total value of logged clues</u>
						<div><span id="value_of_clues">0</span></div>
					</div>
					<div class="capture_box_elements" id="math_box_average">
						<u>Average value of logged clues</u>
						<div><span id="average_of_clues">0</span></div>
					</div>
				</div>
				<div class="captured_rewards" id="top">
					<div id="captured_rewards_title">
						Rewards Captured
					</div>
					<div id="captured_rewards_grid">
						<div id="first_item" class="rewards">
							1
						</div>
						<div id="second_item" class="rewards">
							2
						</div>
						<div id="third_item" class="rewards">
							3
						</div>
						<div id="fourth_item" class="rewards">
							4
						</div>
						<div id="fifth_item" class="rewards">
							5
						</div>
						<div id="sixth_item" class="rewards">
							6
						</div>
						<div id="seventh_item" class="rewards">
							7
						</div>
						<div id="eigth_item" class="rewards">
							8
						</div>
						<div id="ninth_item" class="rewards">
							9
						</div>
					</div>
					<div id="self_button" class="nisbutton" onclick="refresh();"><strike>Self Insert into DB</strike></div>	
				</div>
        	</div>
		</div>
    </header>
	<mainsection>
		<div class="general">
			<div class="general_title"><span id="general_rewards">General Rewards</span></div>
			<div class="bottom_border"></div>
			<div class="loot_display" id="general_loot"></div>
        </div>
        <div class="common">
			<div class="common_title"><span id="common_rewards">Common Rewards</span></div>
			<div class="bottom_border"></div>
			<div class="loot_display" id="common_loot"></div>
        </div>
        <div class="rare">
			<div class="rare_title"><span id="rare_rewards">Rare Rewards</span></div>
			<div class="bottom_border"></div>
			<div class="loot_display" id="rare_loot"></div>
        </div>
		<div class="broadcasts" id="broadcasts_and_caskets">
			<div class="broadcasts_title"><span id="broadcasts_rewards">Broadcast Rewards</span></div>
			<div class="bottom_border"></div>
			<div class="loot_display" id="broadcasts_loot"></div>
        </div>
    </mainsection>
	<prefooter>

	</prefooter>
    <footer>
		<div class="footer_bar">

		</div>
        <div class="copyright">
            &nbsp;&nbsp;Reach out on Discord for questions or inquiries @RedX1000#3655
        </div>
    </footer>
</body>